"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[436],{5436:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l=a(7565),s=a(7929);const n=()=>{const[e,t]=(0,l.useState)({article_title:"",article_subtitle:"",article_description:"",article_category:"fitness"}),[a,n]=(0,l.useState)([]),[i,o]=(0,l.useState)(null),r=a=>{const{name:l,value:s}=a.target;t({...e,[l]:s})},c=e=>{const t=new FileReader;t.onloadend=()=>{o(t.result)},t.readAsDataURL(e)},d=e=>{e.preventDefault(),e.stopPropagation()},m=e=>{n([e])},h=()=>{t({article_title:"",article_subtitle:"",article_description:"",article_category:"fitness"}),n([]),o(null)};return(0,s.jsxs)("form",{id:"create-article",onSubmit:async t=>{t.preventDefault();let l="";if(a.length>0)try{const e=a[0];l=await(async e=>{const t="https://api.cloudinary.com/v1_1/".concat("dhyrv5g3w","/image/upload"),a=new FormData;a.append("file",e),a.append("upload_preset","ptwmh2mt"),a.append("folder","BlogJesus");const l=await fetch(t,{method:"POST",body:a});if(l.ok)return(await l.json()).secure_url;throw new Error("Failed to upload image")})(e)}catch(i){return void console.error("Error uploading image:",i)}const s=(new Date).toISOString().split("T")[0],n={...e,article_image_url:l,article_day_posted:s};try{const e=await fetch("".concat("http://127.0.0.1:8000/myapp/","blog/post/create/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});e.ok?h():console.error("Error saving article:",e.statusText)}catch(i){console.error("Error saving article:",i)}},children:[(0,s.jsxs)("div",{className:"row mb-3",children:[(0,s.jsxs)("div",{className:"col-md-6",children:[(0,s.jsx)("label",{htmlFor:"article-title",className:"form-label",children:"Article Title"}),(0,s.jsx)("input",{id:"article-title",name:"article_title",type:"text",className:"form-control",placeholder:"Enter Article Title",value:e.article_title,onChange:r,required:!0})]}),(0,s.jsxs)("div",{className:"col-md-6",children:[(0,s.jsx)("label",{htmlFor:"article-subtitle",className:"form-label",children:"Article Subtitle"}),(0,s.jsx)("input",{id:"article-subtitle",name:"article_subtitle",type:"text",className:"form-control",placeholder:"Enter Article Subtitle",value:e.article_subtitle,onChange:r,required:!0})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"article-description",className:"form-label",children:"Article Description"}),(0,s.jsx)("textarea",{id:"article-description",name:"article_description",className:"form-control",placeholder:"Enter Article Description",value:e.article_description,onChange:r,required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"article-category",className:"form-label",children:"Category"}),(0,s.jsxs)("select",{id:"article-category",name:"article_category",className:"form-select",value:e.article_category,onChange:r,required:!0,children:[(0,s.jsx)("option",{value:"fitness",children:"Fitness"}),(0,s.jsx)("option",{value:"health",children:"Health"}),(0,s.jsx)("option",{value:"mindset",children:"Mindset"}),(0,s.jsx)("option",{value:"nutrition",children:"Nutrition"})]})]}),(0,s.jsx)("div",{className:"dropzone-area p-3 rounded ".concat(i?"has-image":""),onDragOver:d,onDragLeave:d,onDrop:e=>{e.preventDefault();const t=e.dataTransfer.files[0];t&&(m(t),c(t))},children:i?(0,s.jsx)("img",{src:i,alt:"Uploaded",className:"uploaded-image mb-3"}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"file-upload-icon mb-3",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),(0,s.jsx)("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"})]})}),(0,s.jsx)("p",{children:"Click to upload or drag and drop"}),(0,s.jsx)("input",{type:"file",id:"upload-file",name:"uploaded-file",className:"d-none",onChange:e=>{const t=e.target.files[0];t&&(m(t),c(t))}}),(0,s.jsx)("label",{htmlFor:"upload-file",className:"btn btn-outline-primary",children:"Choose File"}),(0,s.jsx)("p",{className:"message mt-3",children:a.length>0?"".concat(a[0].name,", ").concat(a[0].size," bytes"):"No Files Selected"})]})}),(0,s.jsxs)("div",{className:"dropzone-actions mt-4 d-flex justify-content-between",children:[(0,s.jsx)("button",{type:"reset",className:"btn btn-secondary",onClick:h,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})};var i=a(3418),o=a(1030),r=a(6267);const c=()=>{const{actions:e}=(0,l.useContext)(i.o),[t,a]=(0,l.useState)([]),n=(0,o.Zp)(),[c,d]=(0,l.useState)(),{data:m,loading:h,error:u}=(0,r.O)("".concat("http://127.0.0.1:8000/myapp/","api/articles"));(0,l.useEffect)((()=>{h||u||a(m)}),[m,h,u]);const p=()=>{const e="".concat("http://127.0.0.1:8000/myapp/","api/article/delete/").concat(c);fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok?(a((e=>e.filter((e=>e.id!==c)))),d(null)):console.error("Failed to delete article")})).catch((e=>{console.error("Error deleting article:",e)}))};return(0,s.jsxs)(s.Fragment,{children:[t.length>0?t.map(((t,a)=>(0,s.jsxs)("article",{id:"admin_article_list",children:[(0,s.jsx)("p",{children:t.article_title}),(0,s.jsxs)("div",{children:[(0,s.jsx)("i",{onClick:()=>{return e=t.id,void n("/blog/article/".concat(e));var e},className:"fa-solid fa-eye me-3"}),(0,s.jsx)("i",{onClick:()=>{return a=t.id,void e.fetchSingleArticle(a);var a},"data-bs-toggle":"modal","data-bs-target":"#editModal",className:"fa-solid fa-pen me-3"}),(0,s.jsx)("i",{onClick:()=>d(t.id),"data-bs-toggle":"modal","data-bs-target":"#deleteModal",className:"fa-solid fa-trash"})]})]},a))):(0,s.jsx)("p",{children:"Loading articles..."}),(0,s.jsx)("div",{className:"modal fade",id:"deleteModal",tabIndex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true",children:(0,s.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:(0,s.jsxs)("div",{className:"modal-content rounded-3 shadow",children:[(0,s.jsxs)("div",{className:"modal-body p-4 text-center",children:[(0,s.jsx)("h5",{className:"mb-0",children:"Are you sure you want to delete?"}),(0,s.jsx)("p",{className:"mb-0",children:"You can always change your mind."})]}),(0,s.jsxs)("div",{className:"modal-footer flex-nowrap p-0",children:[(0,s.jsx)("button",{type:"button",onClick:()=>p(),className:"btn btn-lg btn-link fs-6 text-decoration-none col-6 py-3 m-0 rounded-0 border-end","data-bs-dismiss":"modal",children:(0,s.jsx)("strong",{children:"Yes, delete"})}),(0,s.jsx)("button",{type:"button",className:"btn btn-lg btn-link fs-6 text-decoration-none col-6 py-3 m-0 rounded-0","data-bs-dismiss":"modal",children:"No thanks"})]})]})})}),(0,s.jsx)("div",{className:"modal fade",id:"editModal",tabIndex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true",children:(0,s.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:(0,s.jsxs)("div",{className:"modal-content rounded-3 shadow",children:[(0,s.jsx)("div",{className:"modal-body p-4 text-center",children:(0,s.jsx)("h5",{className:"mb-0",children:"Edit Article"})}),(0,s.jsxs)("div",{className:"modal-footer flex-nowrap p-0",children:[(0,s.jsx)("button",{type:"button",onClick:()=>p(),className:"btn btn-lg btn-link fs-6 text-decoration-none col-6 py-3 m-0 rounded-0 border-end","data-bs-dismiss":"modal",children:(0,s.jsx)("strong",{children:"Yes, delete"})}),(0,s.jsx)("button",{type:"button",className:"btn btn-lg btn-link fs-6 text-decoration-none col-6 py-3 m-0 rounded-0","data-bs-dismiss":"modal",children:"No thanks"})]})]})})})]})},d=e=>{let{index:t,title:a,activeIndex:l,setActiveIndex:n}=e;return(0,s.jsx)("button",{className:"accordion-title-button ".concat(t===l?"active":""),onClick:()=>{n(t===l?-1:t)},children:a})},m=()=>{const[e,t]=(0,l.useState)(0),a=[{title:"Create Article",content:(0,s.jsx)(n,{})},{title:"All Articles",content:(0,s.jsx)(c,{active:1===e,onClickReload:()=>window.location.reload()})}];return(0,s.jsxs)("section",{id:"admin-article",className:"container-fluid",children:[(0,s.jsxs)("header",{className:"aa-header row col-11 mx-auto my-3 p-4",children:[(0,s.jsx)("h1",{children:"Articles Section"}),(0,s.jsx)("p",{children:"This section allows you to add, delete, edit, and create articles that will be posted on the blog."})]}),(0,s.jsx)("main",{className:"aa-main row col-11 mx-auto",children:(0,s.jsxs)("div",{className:"accordion-container p-4",children:[(0,s.jsx)("div",{className:"accordion-titles",children:a.map(((a,l)=>(0,s.jsx)(d,{index:l,title:a.title,activeIndex:e,setActiveIndex:t},l)))}),(0,s.jsx)("div",{className:"accordion-contents",children:a.map(((t,a)=>(0,s.jsx)("div",{className:"accordion-content ".concat(a===e?"show":""),children:(0,s.jsx)("div",{className:"accordion-body",children:t.content})},a)))})]})})]})}},6267:(e,t,a)=>{a.d(t,{O:()=>s});var l=a(7565);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[a,s]=(0,l.useState)(null),[n,i]=(0,l.useState)(!0),[o,r]=(0,l.useState)(null),c=(0,l.useCallback)((async()=>{try{i(!0);const a=await fetch(e,t);if(!a.ok)throw new Error("Network response was not ok");const l=await a.json();s(l)}catch(o){r(o)}finally{i(!1)}}),[e,t]);(0,l.useEffect)((()=>{c()}),[c]);return{data:a,loading:n,error:o,refetch:(0,l.useCallback)((()=>{c()}),[c])}}}}]);
//# sourceMappingURL=436.9f028337.chunk.js.map